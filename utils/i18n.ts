export type Language = "en" | "zh";

export const translations = {
  en: {
    // Navigation
    "nav.codeImages": "Code Images",
    "nav.codeImages.desc": "Create beautiful images of your code",
    "nav.iconMaker": "Icon Maker",
    "nav.iconMaker.desc": "Create beautiful icons",
    "nav.prompts": "Prompts",
    "nav.prompts.desc": "Explore AI Prompts for Raycast",
    "nav.presets": "Presets",
    "nav.presets.desc": "Explore AI Presets for Raycast",
    "nav.quicklinks": "Quicklinks",
    "nav.quicklinks.desc": "Explore Raycast Quicklinks",
    "nav.snippets": "Snippets",
    "nav.snippets.desc": "Browse and import Raycast Snippets",
    "nav.themes": "Themes",
    "nav.themes.desc": "Browse and import Raycast Themes",

    // Common
    "common.about": "About",
    "common.shortcuts": "Shortcuts",
    "common.contribute": "Contribute",
    "common.language": "Language",
    "common.autoDetect": "Auto-Detect",
    "common.categories": "Categories",
    "common.size": "Size",
    "common.position": "Position",
    "common.undo": "Undo",
    "common.format": "Format Code",
    "common.download": "Download",
    "common.copy": "Copy",
    "common.save": "Save",
    "common.export": "Export",
    "common.share": "Share",
    "common.search": "Search",
    "common.select": "Select",
    "common.add": "Add",
    "common.remove": "Remove",
    "common.cancel": "Cancel",
    "common.close": "Close",
    "common.open": "Open",
    "common.loading": "Loading",
    "common.error": "Error",

    // Code Images
    "code.focusEditor": "Focus text editor",
    "code.unfocusEditor": "Unfocus text editor",
    "code.changeColors": "Change colors",
    "code.toggleBackground": "Toggle background",
    "code.toggleDarkMode": "Toggle dark mode",
    "code.toggleLineNumbers": "Toggle line numbers",
    "code.changePadding": "Change padding",
    "code.selectLanguage": "Select language",
    "code.highlightLine": "Highlight line",
    "code.formatCode": "Format code",
    "code.toggleExportMenu": "Toggle Export Menu",
    "code.savePNG": "Save PNG",
    "code.saveSVG": "Save SVG",
    "code.copyImage": "Copy image",
    "code.copyURL": "Copy URL",
    "code.openShortcuts": "Open shortcuts",
    "code.about.title": "About",
    "code.about.desc1": "Code Images by Raycast is a tool to create beautiful screenshots of your code.",
    "code.about.desc2":
      "Pick a theme from a range of syntax colors and backgrounds, the language of your code and choose between light or dark mode.",
    "code.about.desc3":
      "Customize the padding and when you're ready, click export image in the top-right corner to save the image as a png, svg or share a link to your code.",
    "code.about.desc4": "You can also change the image resolution in the export menu.",
    "code.about.contribute": "The project is Open Source and available on GitHub.",
    "code.about.feedback": "If you have any questions or feedback, please write to us on ğ• or send us an email.",

    // Export
    "export.savePNG": "Save PNG",
    "export.saveSVG": "Save SVG",
    "export.copyImage": "Copy Image",
    "export.copyURL": "Copy URL",
    "export.copyURLToShare": "Copy URL to Share",
    "export.downloadJSON": "Download JSON",
    "export.copyJSON": "Copy JSON",
    "export.addToRaycast": "Add to Raycast",
    "export.size": "Size",
    "export.toggleMenu": "Toggle Export Menu",

    // Instructions
    "instructions.installCommands": "Install AI Commands",
    "instructions.selectPrompt":
      "Select a prompt by clicking on it. Hold âŒ˜ to select multiple. Click Add to Raycast to import them directly.",
    "instructions.selectSnippet":
      "Select a snippet by clicking on it. Hold âŒ˜ to select multiple. Click Add to Raycast to import them directly.",
    "instructions.selectQuicklink":
      "Select a quicklink by clicking on it. Hold âŒ˜ to select multiple. Click Add to Raycast to import them directly.",
  },
  zh: {
    // Navigation
    "nav.codeImages": "ä»£ç å›¾ç‰‡",
    "nav.codeImages.desc": "åˆ›å»ºç¾è§‚çš„ä»£ç æˆªå›¾",
    "nav.iconMaker": "å›¾æ ‡åˆ¶ä½œå™¨",
    "nav.iconMaker.desc": "åˆ›å»ºç¾è§‚çš„å›¾æ ‡",
    "nav.prompts": "æç¤ºè¯",
    "nav.prompts.desc": "æ¢ç´¢ Raycast AI æç¤ºè¯",
    "nav.presets": "é¢„è®¾",
    "nav.presets.desc": "æ¢ç´¢ Raycast AI é¢„è®¾",
    "nav.quicklinks": "å¿«é€Ÿé“¾æ¥",
    "nav.quicklinks.desc": "æ¢ç´¢ Raycast å¿«é€Ÿé“¾æ¥",
    "nav.snippets": "ä»£ç ç‰‡æ®µ",
    "nav.snippets.desc": "æµè§ˆå’Œå¯¼å…¥ Raycast ä»£ç ç‰‡æ®µ",
    "nav.themes": "ä¸»é¢˜",
    "nav.themes.desc": "æµè§ˆå’Œå¯¼å…¥ Raycast ä¸»é¢˜",

    // Common
    "common.about": "å…³äº",
    "common.shortcuts": "å¿«æ·é”®",
    "common.contribute": "è´¡çŒ®",
    "common.language": "è¯­è¨€",
    "common.autoDetect": "è‡ªåŠ¨æ£€æµ‹",
    "common.categories": "åˆ†ç±»",
    "common.size": "å°ºå¯¸",
    "common.position": "ä½ç½®",
    "common.undo": "æ’¤é”€",
    "common.format": "æ ¼å¼åŒ–ä»£ç ",
    "common.download": "ä¸‹è½½",
    "common.copy": "å¤åˆ¶",
    "common.save": "ä¿å­˜",
    "common.export": "å¯¼å‡º",
    "common.share": "åˆ†äº«",
    "common.search": "æœç´¢",
    "common.select": "é€‰æ‹©",
    "common.add": "æ·»åŠ ",
    "common.remove": "åˆ é™¤",
    "common.cancel": "å–æ¶ˆ",
    "common.close": "å…³é—­",
    "common.open": "æ‰“å¼€",
    "common.loading": "åŠ è½½ä¸­",
    "common.error": "é”™è¯¯",

    // Code Images
    "code.focusEditor": "èšç„¦æ–‡æœ¬ç¼–è¾‘å™¨",
    "code.unfocusEditor": "å–æ¶ˆèšç„¦æ–‡æœ¬ç¼–è¾‘å™¨",
    "code.changeColors": "æ›´æ”¹é¢œè‰²",
    "code.toggleBackground": "åˆ‡æ¢èƒŒæ™¯",
    "code.toggleDarkMode": "åˆ‡æ¢æ·±è‰²æ¨¡å¼",
    "code.toggleLineNumbers": "åˆ‡æ¢è¡Œå·",
    "code.changePadding": "æ›´æ”¹å†…è¾¹è·",
    "code.selectLanguage": "é€‰æ‹©è¯­è¨€",
    "code.highlightLine": "é«˜äº®è¡Œ",
    "code.formatCode": "æ ¼å¼åŒ–ä»£ç ",
    "code.toggleExportMenu": "åˆ‡æ¢å¯¼å‡ºèœå•",
    "code.savePNG": "ä¿å­˜ PNG",
    "code.saveSVG": "ä¿å­˜ SVG",
    "code.copyImage": "å¤åˆ¶å›¾ç‰‡",
    "code.copyURL": "å¤åˆ¶é“¾æ¥",
    "export.copyURLToShare": "å¤åˆ¶åˆ†äº«é“¾æ¥",
    "code.openShortcuts": "æ‰“å¼€å¿«æ·é”®",
    "code.about.title": "å…³äº",
    "code.about.desc1": "Raycast ä»£ç å›¾ç‰‡æ˜¯ä¸€ä¸ªåˆ›å»ºç¾è§‚ä»£ç æˆªå›¾çš„å·¥å…·ã€‚",
    "code.about.desc2": "ä»å„ç§è¯­æ³•é¢œè‰²å’ŒèƒŒæ™¯ä¸­é€‰æ‹©ä¸»é¢˜ï¼Œé€‰æ‹©ä»£ç è¯­è¨€å¹¶åœ¨æ˜æš—æ¨¡å¼ä¹‹é—´åˆ‡æ¢ã€‚",
    "code.about.desc3": "è‡ªå®šä¹‰å†…è¾¹è·ï¼Œå‡†å¤‡å¥½åï¼Œç‚¹å‡»å³ä¸Šè§’çš„å¯¼å‡ºå›¾ç‰‡æŒ‰é’®ï¼Œå°†å›¾ç‰‡ä¿å­˜ä¸º PNGã€SVG æˆ–åˆ†äº«ä»£ç é“¾æ¥ã€‚",
    "code.about.desc4": "æ‚¨è¿˜å¯ä»¥åœ¨å¯¼å‡ºèœå•ä¸­æ›´æ”¹å›¾ç‰‡åˆ†è¾¨ç‡ã€‚",
    "code.about.contribute": "è¯¥é¡¹ç›®æ˜¯å¼€æºçš„ï¼Œå¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°ã€‚",
    "code.about.feedback": "å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–åé¦ˆï¼Œè¯·åœ¨ ğ• ä¸Šè”ç³»æˆ‘ä»¬æˆ–å‘é€ç”µå­é‚®ä»¶ã€‚",

    // Export
    "export.savePNG": "ä¿å­˜ PNG",
    "export.saveSVG": "ä¿å­˜ SVG",
    "export.copyImage": "å¤åˆ¶å›¾ç‰‡",
    "export.copyURL": "å¤åˆ¶é“¾æ¥",
    "export.downloadJSON": "ä¸‹è½½ JSON",
    "export.copyJSON": "å¤åˆ¶ JSON",
    "export.addToRaycast": "æ·»åŠ åˆ° Raycast",
    "export.size": "å°ºå¯¸",
    "export.toggleMenu": "åˆ‡æ¢å¯¼å‡ºèœå•",

    // Instructions
    "instructions.installCommands": "å®‰è£… AI å‘½ä»¤",
    "instructions.selectPrompt": 'ç‚¹å‡»é€‰æ‹©æç¤ºè¯ã€‚æŒ‰ä½ âŒ˜ å¯é€‰æ‹©å¤šä¸ªã€‚ç‚¹å‡»"æ·»åŠ åˆ° Raycast"ç›´æ¥å¯¼å…¥ã€‚',
    "instructions.selectSnippet": 'ç‚¹å‡»é€‰æ‹©ä»£ç ç‰‡æ®µã€‚æŒ‰ä½ âŒ˜ å¯é€‰æ‹©å¤šä¸ªã€‚ç‚¹å‡»"æ·»åŠ åˆ° Raycast"ç›´æ¥å¯¼å…¥ã€‚',
    "instructions.selectQuicklink": 'ç‚¹å‡»é€‰æ‹©å¿«é€Ÿé“¾æ¥ã€‚æŒ‰ä½ âŒ˜ å¯é€‰æ‹©å¤šä¸ªã€‚ç‚¹å‡»"æ·»åŠ åˆ° Raycast"ç›´æ¥å¯¼å…¥ã€‚',
  },
} as const;

export type TranslationKey = keyof typeof translations.en;

export function getBrowserLanguage(): Language {
  if (typeof window === "undefined") return "en";

  const browserLang = navigator.language.toLowerCase();
  if (browserLang.startsWith("zh")) {
    return "zh";
  }
  return "en";
}

const STORAGE_KEY = "ray-so-language";

export function getSavedLanguage(): Language {
  if (typeof window === "undefined") return "en";

  const saved = localStorage.getItem(STORAGE_KEY);
  if (saved === "zh" || saved === "en") {
    return saved;
  }
  return getBrowserLanguage();
}

export function saveLanguage(lang: Language) {
  if (typeof window === "undefined") return;
  localStorage.setItem(STORAGE_KEY, lang);
}

export function getTranslation(key: TranslationKey, lang: Language): string {
  return translations[lang][key] || translations.en[key] || key;
}
